<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>imgUpload</title>

        <!-- jQuery cdn -->
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

</head>

<body>
    <!-- 첨부파일을 입력받는 input -->
    <input type="file" id="myFileInput">

    <!-- localStorage에 올라간 이미지를 띄울 곳 -->
    <div class="box"></div>

    <script>
        // 인풋창의 이미지 입력받아 localStorage에 저장
        document.querySelector('#myFileInput').addEventListener("change", function () {
            const reader = new FileReader();
            reader.addEventListener('load', () => {
                // localStorage에 imgUpload라는 키로 저장 (src, 문자형식)
                localStorage.setItem('imgUpload',reader.result);

                // localStorage에서 가져와서 창에 띄우는 부분
                // imgUpload라는 키의 value를 localStorage에서 받아옴
                imgSrc = localStorage.getItem('imgUpload');

                // 위의 value 값을 src로 갖는 이미지 요소를 하나 만들어서 append
                const imgUpload = document.createElement('img');
                imgUpload.setAttribute('src', imgSrc);
                $('.box').append(imgUpload);
            })
            reader.readAsDataURL(this.files[0]);
        })
    </script>
</body>

</html>